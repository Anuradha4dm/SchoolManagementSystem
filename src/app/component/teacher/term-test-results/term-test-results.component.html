<div class="panel-header"></div>

<div class="main-content">
  <!--Selections are here-->
  <div class="card card-body">
    <h4 class="font-italic">Add Term Test Reuslts</h4>

    <div class="row">
      <div class="col">
        <label>Class:</label>
        <input
          type="text"
          [value]="termResult.grade"
          class="form-control"
          disabled
        />
      </div>

      <div class="col">
        <label>Year:</label>
        <input
          type="text"
          [value]="termResult.year"
          class="form-control"
          disabled
        />
      </div>

      <div class="col">
        <label>Term:</label>
        <select class="form-control" [(ngModel)]="termResult.term">
          <option value="1">Term1</option>
          <option value="2">Term2</option>
          <option value="3">Term3</option>
        </select>
      </div>
    </div>

    <input
      type="file"
      name="filename"
      multiple="false"
      (change)="onFileChange($event)"
      id=""
    />

    <input
      type="button"
      value="read"
      (click)="onReadStudentResult()"
      class="btn btn-danger"
    />
  </div>

  <div class="row">
    <!--Student List here-->
    <div class="col">
      <div class="card card-body">
        <table class="table table-hover text-center">
          <tr>
            <th>Student ID</th>
            <th>First Name</th>
            <th>Last Name</th>
          </tr>
          <tbody>
            <tr *ngFor="let student of studentList">
              <td>{{ student._id }}</td>
              <td>{{ student.firstname | titlecase }}</td>
              <td>{{ student.lastname | titlecase }}</td>
              <td>
                <button
                  (click)="
                    onAddResultsClick(
                      student._id,
                      student.firstname,
                      student.lastname
                    )
                  "
                  class="btn btn-primary btn-sm"
                >
                  Add Results
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!--Specific student subjects here-->
    <div class="col-md-5" *ngIf="show">
      <div class="card card-body border border-dark">
        <div class="row">
          <div class="col">
            <label>Year</label>
            <input
              type="text"
              class="form-control"
              [value]="termResult.year"
              disabled
            />
          </div>

          <div class="col">
            <label>Term</label>
            <input
              type="text"
              class="form-control"
              [value]="termResult.term"
              disabled
            />
          </div>

          <div class="col">
            <label>Student ID</label>
            <input
              type="text"
              class="form-control"
              [value]="termResult.studentid"
              disabled
            />
          </div>
        </div>

        <div class="form-group">
          <label>Student Name</label>
          <input
            type="text"
            class="form-control"
            [value]="fullname | titlecase"
            disabled
          />
        </div>

        <form #resultForm="ngForm" (ngSubmit)="onSubmitClick(resultForm.value)">
          <table>
            <tr *ngFor="let subject of subjectList">
              <td class="text-right">
                <label>{{ subject.subjectname | titlecase }} :</label>
              </td>
              <td>
                <input
                  type="text"
                  [name]="subject.subjectid"
                  class="form-control w-50"
                  ngModel
                  required
                />
              </td>
            </tr>
          </table>

          <div class="form-group text-right">
            <button
              type="submit"
              class="btn btn-success btn-sm"
              [disabled]="resultForm.invalid"
              [attr.data-dismiss]="element"
            >
              Submit
            </button>
            <button
              type="button"
              class="btn btn-danger btn-sm"
              (click)="onCancelClick()"
            >
              Cancel
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
